---
title: 从浏览器的角度去理解js机制运行
create_time: 2023年12月19日 10:12
des: 从浏览器的角度去理解js机制运行，摆脱碎片化，形成知识体系
cover: https://assets-us-01.kc-usercontent.com:443/a99c6ff3-1e1d-000a-2573-c93dfb21cf6e/5900325b-5bee-44dc-828f-988078a63472/cover.jpg
---


## 前言
最近同事之间闲聊，聊到了js运行机制，发现大家(包括作者本人)了解的都比较碎片化，不能将所有的知识点串联起来。于是想从浏览器的角度将这一块的内容梳理一下，形成知识体系

## 大纲
* 1、[浏览器进程与线程](https://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html)
* 2、浏览器有哪些进程、线程，各自又负责哪些内容
* 3、从打开浏览器输入网址到关闭浏览器之间的运行流程（**重点**）

## 一、浏览器进程与线程
  >#### 官方是这样描述的:
  >>计算机的核心是 **cup**，它承担了计算机的所有计算任务。进程是cpu资源的最小分配单位,
线程是cpu的最小调度单位（一个进程中可以有多个线程）

  <!-- >#### 。。。比较抽象，不理解没关系，这里我引用[阮一峰老师的文章](https://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html)来描述: -->

  >> 计算机的核心是CPU，它承担了所有的计算任务。它就像一座工厂，时刻在运行

  >> 假定工厂的电力有限，一次只能供给一个车间使用。也就是说，一个车间开工的时候，其他车间都必须停工。背后的含义就是，单个CPU一次只能运行一个任务。（进程就好比工厂的车间，可以有多个，它代表CPU所能处理的单个任务。任一时刻，CPU总是运行一个进程，其他进程处于非运行状态）

  >> 一个车间里，可以有很多工人。他们协同完成一个任务。（线程就好比车间里的工人。一个进程可以包括多个线程。）

  >#### 好了，到这里我们大概说清了进程与线程的关系，这时我们再用专业点的语言来解释一下：

  >> 一个进程就是一个程序的运行实例。详细解释就是，启动一个程序的时候，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫进程。线程是处理具体任务的，多线程可以并行处理任务。但是线程是不能单独存在的，它是由进程来启动和管理的。


## 二、浏览器有哪些进程、线程，各自又负责哪些内容
>#### (1).知道了浏览器是多进程后，再来看看它到底包含哪些进程：（为了简化理解，主要描述渲染进程）
> **1. Browser进程**：浏览器主进程，负责浏览chrome部分，包括浏览器前进后退,页面的创建和销毁,同时这个进程还会控制我们看不到的部分，包括网络请求的发送以及文件的读写

>**2. GPU进程**：负责页面的3D绘制，最多一个

>**3. 插件进程**：每种类型的插件对应一个进程，仅当使用该插件时才创建

>**4. 渲染进程**：默认每个Tab页面一个进程，互不影响。主要作用为页面渲染，脚本执行，事件处理等
  >#### (2).渲染进程包含以下主要线程：
  >1. **GUI渲染线程**
  >* 负责渲染浏览器界面，解析html，css构建dom树和RenderObject树，布局和绘制等
  >* 当界面需要重绘（Repaint）或由于某种操作引发回流(reflow)时，该线程就会执行
  >* 注意，GUI渲染线程与JS引擎线程是互斥的，当JS引擎执行时GUI线程会被挂起（相当于被冻结了），GUI更新会被保存在一个队列中等到JS引擎空闲时立即被执行
  >2. **js引擎线程**
  >* 也称为JS内核，负责处理Javascript脚本程序。（例如V8引擎）
  >* JS引擎线程负责解析Javascript脚本，运行代码。
  >* JS引擎一直等待着任务队列中任务的到来，然后加以处理，一个Tab页（renderer进程）中无论什么时候都只有一个JS线程在运行JS程序
  >* 同样注意，GUI渲染线程与JS引擎线程是互斥的，所以如果JS执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞。
  >3. **事件触发线程**

  >4. **定时触发器线程**
  >5. **异步http请求线程**



